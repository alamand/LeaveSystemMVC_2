@{ViewBag.Title = "Probation Administration";}

@Html.Partial("_LeftMenu")
<h2>@ViewBag.Title</h2>
<div class="col-md-10">
    <div class="panel-group">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" class="active" href="#collapse1">On Probation</a>
                </h4>
            </div>
            <div id="collapse1" class="panel-collapse collapse in">
                <table class="table">
                    <tr>
                        <th>Employee ID</th>
                        <th>Name</th>
                        <th>Department</th>
                        <th>Start Date</th>
                        <th>Employment Duration</th>
                        <th>Confirmation</th>
                    </tr>
                    @{
                        var onProbation = ViewData["OnProbation"] as List<LeaveSystemMVC.Models.sEmployeeModel>;

                        foreach (LeaveSystemMVC.Models.sEmployeeModel onP in onProbation)
                        {
                            <tr>
                                <td>@onP.staffID</td>
                                <td>@onP.firstName @onP.lastName</td>
                                <td>@onP.deptName</td>
                                <td>@onP.empStartDate.ToString().Substring(0, 10)</td>
                                @{
                                    var totalDays = (int)@ViewData["Duration" + onP.staffID.ToString()];
                                    var months = Math.Truncate((double)totalDays / 30);
                                    var days = Math.Truncate((double)totalDays % 30);
                                }
                                    @if (months == 0)
                                    {
                                        if (days == 0) { <td>Joined Today</td> }
                                        else if (days == 1) { <td>@days day</td> }
                                        else { <td>@days days</td> }
                                    }
                                    else if (months == 1)
                                    {
                                        if (days == 0) { <td>@months month</td> }
                                        else if (days == 1) { <td>@months month, @days day</td> }
                                        else { <td>@months month, @days days</td> }
                                    }
                                    else
                                    {
                                        if (days == 0) { <td>@months months</td> }
                                        else if (days == 1) { <td>@months months, @days day</td> }
                                        else { <td>@months months, @days days</td> }
                                    }
                                <td><a href="@Url.Action("SetProbation", "hrProbationAdministration", new { id = onP.staffID }, null)">Confirm</a></td>
                            </tr>
                        }
                    }
                </table>
            </div>
        </div>
    </div>
</div>
